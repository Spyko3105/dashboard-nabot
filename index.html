<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Bot Discord</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <aside class="sidebar">
        <div class="logo">
            <img src="https://cdn-icons-png.flaticon.com/512/5968/5968756.png" alt="Bot Logo" width="48" height="48">
            <span>Mon Bot</span>
        </div>
        <nav>
            <a href="#dashboard" class="active"><i class="fa-solid fa-gauge"></i> Dashboard</a>
            <a href="#commands"><i class="fa-solid fa-terminal"></i> Commandes</a>
            <a href="#stats"><i class="fa-solid fa-chart-bar"></i> Statistiques</a>
            <a href="#settings"><i class="fa-solid fa-cog"></i> Paramètres</a>
        </nav>
        <div class="sidebar-footer">
            <button class="btn-logout"><i class="fa-solid fa-right-from-bracket"></i> Déconnexion</button>
        </div>
    </aside>
    <div class="main-content">
        <header>
            <div class="server-select">
                <select>
                    <option>Sélectionner un serveur</option>
                    <option>Serveur 1</option>
                    <option>Serveur 2</option>
                </select>
            </div>
            <div class="status-bar">
                <span class="status online"><i class="fa-solid fa-circle"></i> Bot en ligne</span>
                <button class="btn-login"><i class="fa-brands fa-discord"></i> Se connecter</button>
            </div>
        </header>
        <main>
            <section id="dashboard" class="dashboard-section">
                <h2>Tableau de bord</h2>
                <div class="dashboard-cards">
                    <div class="card">
                        <h3>Serveurs</h3>
                        <p class="number">3</p>
                    </div>
                    <div class="card">
                        <h3>Utilisateurs</h3>
                        <p class="number">128</p>
                    </div>
                    <div class="card">
                        <h3>Commandes</h3>
                        <p class="number">24</p>
                    </div>
                </div>
            </section>
            <section id="commands" class="dashboard-section">
                <h2>Commandes</h2>
                <table class="commands-table">
                    <thead>
                        <tr>
                            <th>Commande</th>
                            <th>Description</th>
                            <th>Activer</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>/ban</td>
                            <td>Bannir un utilisateur</td>
                            <td><input type="checkbox" checked></td>
                        </tr>
                        <tr>
                            <td>/kick</td>
                            <td>Exclure un utilisateur</td>
                            <td><input type="checkbox" checked></td>
                        </tr>
                        <tr>
                            <td>/help</td>
                            <td>Afficher l'aide</td>
                            <td><input type="checkbox" checked></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="stats" class="dashboard-section">
                <h2>Statistiques</h2>
                <div class="stats-graph">
                    <img src="https://quickchart.io/chart?c={type:'bar',data:{labels:['Lun','Mar','Mer','Jeu','Ven','Sam','Dim'],datasets:[{label:'Commandes',data:[12,19,3,5,2,3,7]}]}}" alt="Graphique des commandes" style="width:100%;max-width:500px;">
                </div>
            </section>
            <section id="settings" class="dashboard-section">
                <h2>Paramètres</h2>
                <form class="settings-form">
                    <label>
                        Préfixe du bot :
                        <input type="text" value="!">
                    </label>
                    <label>
                        Message de bienvenue :
                        <input type="text" value="Bienvenue sur le serveur !">
                    </label>
                    <button type="submit">Enregistrer</button>
                </form>
            </section>
        </main>
        <footer>
            <p>&copy; 2023 Mon Bot Discord - Dashboard</p>
        </footer>
    </div>
    <script>
        const CLIENT_ID = '1361826455406772408';
        const REDIRECT_URI = 'https://dashboard-nabot.vercel.app/';
        const SCOPE = 'connections identify guilds email applications.commands guilds.members.read';

        document.querySelectorAll('.btn-login').forEach(btn => {
            btn.addEventListener('click', () => {
                const discordAuth = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=code&integration_type=0&scope=${encodeURIComponent(SCOPE)}`;
                window.location.href = discordAuth;
            });
        });

        // Exemple de récupération du token d'accès dans l'URL après redirection
        window.addEventListener('load', () => {
            if (window.location.hash) {
                const params = new URLSearchParams(window.location.hash.substring(1));
                const accessToken = params.get('access_token');
                if (accessToken) {
                    // Ici, vous pouvez utiliser le token pour appeler l'API Discord (ex: afficher l'utilisateur)
                    // fetch('https://discord.com/api/users/@me', { headers: { Authorization: 'Bearer ' + accessToken } })
                    //     .then(res => res.json())
                    //     .then(user => { ... });
                }
            }
        });
    </script>
</body>
</html>
